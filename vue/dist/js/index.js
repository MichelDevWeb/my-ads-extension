(()=>{"use strict";var e={580:(e,o,t)=>{var s=t(751),c=t(641),n=t(33);const r={class:"app-container"},a={class:"main-content"},i={class:"account-section"},l={class:"select-container"},u=["disabled"],d=["value"],h=["disabled"],m=["disabled"],p={key:0,class:"loading"},g={key:1,class:"error-message"},v={class:"error-details"},C={key:2,class:"account-info"},k={class:"info-card"},w=["src"],A={class:"info-details"},y={key:3,class:"ads-accounts"},f={class:"ads-grid"},L={class:"ads-name"},T={class:"ads-id"},E={key:0,class:"ads-details"},b={key:1,class:"ads-details"},M={key:4,class:"mcc-section"},_=["value"],N={key:0,class:"child-accounts"},S={class:"accounts-grid"},I={class:"account-name"},F={class:"account-id"},j={class:"account-status"},O={key:5,class:"no-mcc"},U={class:"developer-token-section"},P={class:"token-input-container"},X={class:"token-input-wrapper"},$=["disabled"],D=["disabled"],Z={key:6,class:"mcc-creation-form"},R={class:"form-group"},V={class:"form-group"},B={class:"form-group"},G=["disabled"],z={key:7,class:"mcc-accounts-list"},Q={class:"mcc-grid"},K={class:"mcc-name"},x={class:"mcc-id"},J={class:"mcc-details"};function W(e,o,t,W,q,Y){return(0,c.uX)(),(0,c.CE)("div",r,[o[32]||(o[32]=(0,c.Lk)("header",{class:"header"},[(0,c.Lk)("h1",null,"Google Accounts Manager")],-1)),(0,c.Lk)("main",a,[(0,c.Lk)("div",i,[(0,c.Lk)("div",l,[o[15]||(o[15]=(0,c.Lk)("label",{for:"accountSelect"},"Select Google Account:",-1)),(0,c.bo)((0,c.Lk)("select",{id:"accountSelect","onUpdate:modelValue":o[0]||(o[0]=e=>q.selectedAccount=e),onChange:o[1]||(o[1]=(...e)=>Y.handleAccountSelect&&Y.handleAccountSelect(...e)),disabled:q.loading},[o[14]||(o[14]=(0,c.Lk)("option",{value:""},"Choose an account",-1)),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(q.accounts,(e=>((0,c.uX)(),(0,c.CE)("option",{key:e.id,value:e.email},(0,n.v_)(e.email),9,d)))),128))],40,u),[[s.u1,q.selectedAccount]])]),(0,c.Lk)("button",{onClick:o[2]||(o[2]=(...e)=>Y.addNewAccount&&Y.addNewAccount(...e)),class:"add-account-btn",disabled:q.loading}," Add Account ",8,h),(0,c.Lk)("button",{onClick:o[3]||(o[3]=(...e)=>Y.loadAccounts&&Y.loadAccounts(...e)),class:"refresh-btn",disabled:q.loading}," Refresh Accounts ",8,m)]),q.loading?((0,c.uX)(),(0,c.CE)("div",p,"Loading...")):(0,c.Q3)("",!0),q.error?((0,c.uX)(),(0,c.CE)("div",g,[o[16]||(o[16]=(0,c.Lk)("div",{class:"error-title"},"Error:",-1)),(0,c.Lk)("div",v,(0,n.v_)(q.error),1),(0,c.Lk)("button",{onClick:o[4]||(o[4]=e=>q.error=null),class:"error-close"},"×")])):(0,c.Q3)("",!0),q.selectedAccountInfo?((0,c.uX)(),(0,c.CE)("div",C,[o[19]||(o[19]=(0,c.Lk)("h2",null,"Account Information",-1)),(0,c.Lk)("div",k,[(0,c.Lk)("img",{src:q.selectedAccountInfo.picture,alt:"Profile",class:"profile-img"},null,8,w),(0,c.Lk)("div",A,[(0,c.Lk)("p",null,[o[17]||(o[17]=(0,c.Lk)("strong",null,"Name:",-1)),(0,c.eW)(" "+(0,n.v_)(q.selectedAccountInfo.name),1)]),(0,c.Lk)("p",null,[o[18]||(o[18]=(0,c.Lk)("strong",null,"Email:",-1)),(0,c.eW)(" "+(0,n.v_)(q.selectedAccountInfo.email),1)])])])])):(0,c.Q3)("",!0),q.adsAccounts.length?((0,c.uX)(),(0,c.CE)("div",y,[o[20]||(o[20]=(0,c.Lk)("h2",null,"Google Ads Accounts",-1)),(0,c.Lk)("div",f,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(q.adsAccounts,(e=>((0,c.uX)(),(0,c.CE)("div",{key:e.id,class:(0,n.C4)(["ads-card",{error:e.error}])},[(0,c.Lk)("div",L,(0,n.v_)(e.name),1),(0,c.Lk)("div",T,"ID: "+(0,n.v_)(e.id),1),e.currencyCode?((0,c.uX)(),(0,c.CE)("div",E," Currency: "+(0,n.v_)(e.currencyCode),1)):(0,c.Q3)("",!0),e.timeZone?((0,c.uX)(),(0,c.CE)("div",b," Time Zone: "+(0,n.v_)(e.timeZone),1)):(0,c.Q3)("",!0)],2)))),128))])])):(0,c.Q3)("",!0),q.hasMCC?((0,c.uX)(),(0,c.CE)("div",M,[o[23]||(o[23]=(0,c.Lk)("h3",null,"Google Ads Manager Accounts",-1)),(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>q.selectedMCCAccount=e),onChange:o[6]||(o[6]=(...e)=>Y.handleMCCSelect&&Y.handleMCCSelect(...e)),class:"mcc-select"},[o[21]||(o[21]=(0,c.Lk)("option",{value:""},"Select Manager Account",-1)),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(q.mccAccounts,(e=>((0,c.uX)(),(0,c.CE)("option",{key:e.customerId,value:e.customerId},(0,n.v_)(e.descriptiveName)+" ("+(0,n.v_)(e.customerId)+") ",9,_)))),128))],544),[[s.u1,q.selectedMCCAccount]]),q.childAccounts.length?((0,c.uX)(),(0,c.CE)("div",N,[o[22]||(o[22]=(0,c.Lk)("h4",null,"Managed Accounts",-1)),(0,c.Lk)("div",S,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(q.childAccounts,(e=>((0,c.uX)(),(0,c.CE)("div",{key:e.customerId,class:"account-card"},[(0,c.Lk)("div",I,(0,n.v_)(e.descriptiveName),1),(0,c.Lk)("div",F,"ID: "+(0,n.v_)(e.customerId),1),(0,c.Lk)("div",j,"Status: "+(0,n.v_)(e.status),1)])))),128))])])):(0,c.Q3)("",!0)])):q.selectedAccount&&!q.loading?((0,c.uX)(),(0,c.CE)("div",O," This Google account does not have access to any Google Ads Manager Accounts. ")):(0,c.Q3)("",!0),(0,c.Lk)("div",U,[(0,c.Lk)("div",P,[o[24]||(o[24]=(0,c.Lk)("label",{for:"developerToken"},"Google Ads Developer Token:",-1)),(0,c.Lk)("div",X,[(0,c.bo)((0,c.Lk)("input",{type:"password",id:"developerToken","onUpdate:modelValue":o[7]||(o[7]=e=>q.developerToken=e),placeholder:"Enter your developer token",disabled:q.loading},null,8,$),[[s.Jo,q.developerToken]]),(0,c.Lk)("button",{onClick:o[8]||(o[8]=(...e)=>Y.toggleTokenVisibility&&Y.toggleTokenVisibility(...e)),class:"toggle-visibility-btn",type:"button"},(0,n.v_)(q.showToken?"👁️":"👁️‍🗨️"),1)]),(0,c.Lk)("button",{onClick:o[9]||(o[9]=(...e)=>Y.saveDeveloperToken&&Y.saveDeveloperToken(...e)),class:"save-token-btn",disabled:!q.developerToken||q.loading}," Save Token ",8,D)])]),q.selectedAccount?((0,c.uX)(),(0,c.CE)("div",Z,[o[30]||(o[30]=(0,c.Lk)("h3",null,"Create New MCC Account",-1)),(0,c.Lk)("div",R,[o[25]||(o[25]=(0,c.Lk)("label",{for:"mccName"},"MCC Name:",-1)),(0,c.bo)((0,c.Lk)("input",{id:"mccName","onUpdate:modelValue":o[10]||(o[10]=e=>q.newMCC.name=e),type:"text",placeholder:"Enter MCC account name"},null,512),[[s.Jo,q.newMCC.name]])]),(0,c.Lk)("div",V,[o[27]||(o[27]=(0,c.Lk)("label",{for:"mccCurrency"},"Currency:",-1)),(0,c.bo)((0,c.Lk)("select",{id:"mccCurrency","onUpdate:modelValue":o[11]||(o[11]=e=>q.newMCC.currencyCode=e)},o[26]||(o[26]=[(0,c.Lk)("option",{value:"USD"},"USD - US Dollar",-1),(0,c.Lk)("option",{value:"EUR"},"EUR - Euro",-1),(0,c.Lk)("option",{value:"GBP"},"GBP - British Pound",-1)]),512),[[s.u1,q.newMCC.currencyCode]])]),(0,c.Lk)("div",B,[o[29]||(o[29]=(0,c.Lk)("label",{for:"mccTimeZone"},"Time Zone:",-1)),(0,c.bo)((0,c.Lk)("select",{id:"mccTimeZone","onUpdate:modelValue":o[12]||(o[12]=e=>q.newMCC.timeZone=e)},o[28]||(o[28]=[(0,c.Lk)("option",{value:"America/New_York"},"Eastern Time",-1),(0,c.Lk)("option",{value:"America/Chicago"},"Central Time",-1),(0,c.Lk)("option",{value:"America/Denver"},"Mountain Time",-1),(0,c.Lk)("option",{value:"America/Los_Angeles"},"Pacific Time",-1)]),512),[[s.u1,q.newMCC.timeZone]])]),(0,c.Lk)("button",{onClick:o[13]||(o[13]=(...e)=>Y.createMCCAccount&&Y.createMCCAccount(...e)),disabled:q.loading||!Y.isValidMCCForm,class:"create-mcc-btn"},(0,n.v_)(q.loading?"Creating...":"Create MCC Account"),9,G)])):(0,c.Q3)("",!0),q.mccAccounts.length?((0,c.uX)(),(0,c.CE)("div",z,[o[31]||(o[31]=(0,c.Lk)("h3",null,"Your MCC Accounts",-1)),(0,c.Lk)("div",Q,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(q.mccAccounts,(e=>((0,c.uX)(),(0,c.CE)("div",{key:e.customerId,class:"mcc-card"},[(0,c.Lk)("div",K,(0,n.v_)(e.descriptiveName),1),(0,c.Lk)("div",x,"ID: "+(0,n.v_)(e.customerId),1),(0,c.Lk)("div",{class:(0,n.C4)(["mcc-status",e.status.toLowerCase()])}," Status: "+(0,n.v_)(e.status),3),(0,c.Lk)("div",J,[(0,c.Lk)("div",null,"Currency: "+(0,n.v_)(e.currencyCode),1),(0,c.Lk)("div",null,"Time Zone: "+(0,n.v_)(e.timeZone),1)])])))),128))])])):(0,c.Q3)("",!0)])])}const q={name:"App",data(){return{accounts:[],selectedAccount:"",selectedAccountInfo:null,adsAccounts:[],loading:!1,error:null,hasMCC:!1,mccAccounts:[],selectedMCCAccount:"",childAccounts:[],developerToken:"",showToken:!1,newMCC:{name:"",currencyCode:"USD",timeZone:"America/New_York"}}},computed:{isValidMCCForm(){return this.newMCC.name.trim().length>0}},methods:{async loadAccounts(){this.loading=!0,this.error=null;try{const e=await this.getAuthToken(),o=await this.getUserInfo(e);this.accounts.find((e=>e.email===o.email))||this.accounts.push({id:this.accounts.length+1,email:o.email,token:e})}catch(e){this.error=e.message}finally{this.loading=!1}},getAuthToken(){return new Promise(((e,o)=>{chrome.identity.getAuthToken({interactive:!0,scopes:["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/adwords"]},(t=>{if(chrome.runtime.lastError)return console.error("Auth Error:",chrome.runtime.lastError),void o(new Error(chrome.runtime.lastError.message));e(t)}))}))},async getUserInfo(e){const o=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${e}`}});if(!o.ok)throw new Error("Failed to get user info");return o.json()},async handleAccountSelect(){if(this.selectedAccount){this.loading=!0,this.error=null,this.hasMCC=!1,this.mccAccounts=[],this.selectedMCCAccount="",this.childAccounts=[];try{const e=await chrome.storage.local.get("developerToken");if(!e.developerToken)return this.error="Please save your Google Ads developer token first",void(this.loading=!1);const o=await this.getAuthToken();await this.checkMCCAccess(o)}catch(e){this.error=e.message}finally{this.loading=!1}}},async checkMCCAccess(e){try{const o=await this.validateDeveloperToken(),t=await fetch("https://googleads.googleapis.com/v16/customers:listAccessibleCustomers",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","developer-token":o}});if(!t.ok){if(403===t.status)return void(this.hasMCC=!1);throw new Error("Failed to check MCC access")}const s=await t.json();s.resourceNames?.length?(this.hasMCC=!0,this.mccAccounts=await Promise.all(s.resourceNames.map((async o=>{const t=o.split("/").pop();try{const o=await fetch(`https://googleads.googleapis.com/v16/customers/${t}/googleAds:search`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","developer-token":this.developerToken,"login-customer-id":t},body:JSON.stringify({query:"\n                        SELECT\n                          customer.id,\n                          customer.descriptive_name,\n                          customer.status\n                        FROM customer\n                        LIMIT 1\n                      "})});if(!o.ok){const e=await o.json();throw console.error("API Error:",e),new Error("Failed to get account details")}const s=await o.json(),c=s.results?.[0]?.customer;return{customerId:t,descriptiveName:c?.descriptiveName||"Unnamed Account",status:c?.status||"UNKNOWN"}}catch(s){return console.error(`Error for account ${t}:`,s),{customerId:t,descriptiveName:"Error loading details",status:"UNKNOWN"}}})))):this.hasMCC=!1}catch(o){throw console.error("MCC check error:",o),new Error(o.message||"Failed to check MCC access")}},async handleMCCSelect(){if(this.selectedMCCAccount){this.loading=!0;try{const e=await this.getAuthToken();await this.getChildAccounts(e,this.selectedMCCAccount)}catch(e){this.error=e.message}finally{this.loading=!1}}else this.childAccounts=[]},async getChildAccounts(e,o){try{const t=await fetch(`https://googleads.googleapis.com/v15/customers/${o}/googleAdsService:searchStream`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({query:"\n                SELECT\n                  customer_client.client_customer,\n                  customer_client.level,\n                  customer_client.manager,\n                  customer_client.descriptive_name,\n                  customer_client.status\n                FROM customer_client\n                WHERE customer_client.level = 1\n              "})});if(!t.ok)throw new Error("Failed to get child accounts");const s=await t.json();this.childAccounts=s.results?.map((e=>({customerId:e.customerClient.clientCustomer,descriptiveName:e.customerClient.descriptiveName,status:e.customerClient.status})))||[]}catch(t){console.error("Child accounts error:",t),this.error="Failed to get child accounts",this.childAccounts=[]}},async getAdsAccounts(e){try{const o=await this.validateDeveloperToken(),t=await fetch("https://googleads.googleapis.com/v15/customers:listAccessibleCustomers",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","developer-token":o}});if(!t.ok){const e=await t.json();throw console.error("API Error Response:",e),new Error(e.error?.message||"Failed to get Ads accounts")}const s=await t.json();console.log("Ads accounts response:",s),s.resourceNames?this.adsAccounts=await Promise.all(s.resourceNames.map((async t=>{const s=t.split("/").pop();try{const c=await fetch(`https://googleads.googleapis.com/v15/customers/${s}/googleAdsService:search`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","developer-token":o,"login-customer-id":s},body:JSON.stringify({query:"\n                        SELECT\n                          customer.id,\n                          customer.descriptive_name,\n                          customer.currency_code,\n                          customer.time_zone\n                        FROM customer\n                        LIMIT 1\n                      "})});if(!c.ok)throw new Error("Failed to get account details");const n=await c.json(),r=n.results?.[0]?.customer;return{id:s,resourceName:t,name:r?.descriptive_name||"Unnamed Account",currencyCode:r?.currency_code,timeZone:r?.time_zone}}catch(c){return console.error(`Error getting details for account ${s}:`,c),{id:s,resourceName:t,name:"Error loading details",error:!0}}}))):this.adsAccounts=[]}catch(o){throw console.error("Ads API Error:",o),new Error(`Failed to get Ads accounts: ${o.message}`)}},async addNewAccount(){this.loading=!0,this.error=null;try{const e=await new Promise(((e,o)=>{const t=new URL("https://accounts.google.com/o/oauth2/v2/auth"),s={client_id:"433583771675-s8q43doerjb2ats95iskgcpe9tqjtmb4.apps.googleusercontent.com",response_type:"token",redirect_uri:chrome.identity.getRedirectURL("oauth2"),scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/adwords",prompt:"select_account consent"};Object.keys(s).forEach((e=>t.searchParams.append(e,s[e]))),chrome.identity.launchWebAuthFlow({url:t.toString(),interactive:!0},(t=>{if(chrome.runtime.lastError)o(chrome.runtime.lastError);else if(t)try{const s=new URL(t),c=s.hash.substring(1),n=new URLSearchParams(c),r=n.get("access_token");r?e(r):o(new Error("No access token received"))}catch(s){o(s)}else o(new Error("No redirect URL received"))}))})),o=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${e}`}}).then((e=>{if(!e.ok)throw new Error("Failed to get user info");return e.json()})),t=this.accounts.some((e=>e.email===o.email));if(t)return void(this.error="This account is already added");this.accounts.push({id:this.accounts.length+1,email:o.email,token:e,picture:o.picture,name:o.name}),this.selectedAccount=o.email,this.selectedAccountInfo=o,this.showStatus(`Account ${o.email} added successfully!`,"success"),await this.checkMCCAccess(e)}catch(e){console.error("Add account error:",e),this.error=e.message}finally{this.loading=!1}},showStatus(e,o){this.error="error"===o?e:null},toggleTokenVisibility(){this.showToken=!this.showToken;const e=document.getElementById("developerToken");e.type=this.showToken?"text":"password"},async saveDeveloperToken(){this.loading=!0,this.error=null;try{await chrome.storage.local.set({developerToken:this.developerToken}),this.showStatus("Developer token saved successfully!","success")}catch(e){this.error="Failed to save developer token: "+e.message}finally{this.loading=!1}},async loadSavedToken(){try{const e=await chrome.storage.local.get("developerToken");e.developerToken&&(this.developerToken=e.developerToken)}catch(e){console.error("Failed to load developer token:",e)}},async validateDeveloperToken(){const e=await chrome.storage.local.get("developerToken");if(!e.developerToken)throw new Error("Please save your Google Ads developer token first");return e.developerToken},async createMCCAccount(){if(this.selectedAccount&&this.isValidMCCForm){this.loading=!0,this.error=null;try{const e=await this.getAuthToken(),o=await fetch("https://googleads.googleapis.com/v16/customers:createCustomerClient",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","developer-token":this.developerToken},body:JSON.stringify({customerClient:{descriptiveName:this.newMCC.name,currencyCode:this.newMCC.currencyCode,timeZone:this.newMCC.timeZone,manager:!0}})});if(!o.ok){const e=await o.json();throw new Error(e.error?.message||"Failed to create MCC account")}const t=await o.json();console.log("MCC Creation Response:",t),this.mccAccounts.push({customerId:t.resourceName.split("/").pop(),descriptiveName:this.newMCC.name,status:"ACTIVE",currencyCode:this.newMCC.currencyCode,timeZone:this.newMCC.timeZone}),this.newMCC.name="",this.$emit("show-notification",{type:"success",message:"MCC account created successfully!"})}catch(e){console.error("MCC Creation Error:",e),this.error=`Failed to create MCC account: ${e.message}`}finally{this.loading=!1}}}},mounted(){this.loadSavedToken()}};var Y=t(262);const H=(0,Y.A)(q,[["render",W]]),ee=H;(0,s.Ef)(ee).mount("#app")}},o={};function t(s){var c=o[s];if(void 0!==c)return c.exports;var n=o[s]={exports:{}};return e[s](n,n.exports,t),n.exports}t.m=e,(()=>{var e=[];t.O=(o,s,c,n)=>{if(!s){var r=1/0;for(u=0;u<e.length;u++){for(var[s,c,n]=e[u],a=!0,i=0;i<s.length;i++)(!1&n||r>=n)&&Object.keys(t.O).every((e=>t.O[e](s[i])))?s.splice(i--,1):(a=!1,n<r&&(r=n));if(a){e.splice(u--,1);var l=c();void 0!==l&&(o=l)}}return o}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,c,n]}})(),(()=>{t.d=(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{var e={57:0};t.O.j=o=>0===e[o];var o=(o,s)=>{var c,n,[r,a,i]=s,l=0;if(r.some((o=>0!==e[o]))){for(c in a)t.o(a,c)&&(t.m[c]=a[c]);if(i)var u=i(t)}for(o&&o(s);l<r.length;l++)n=r[l],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(u)},s=self["webpackChunkgoogle_accounts_manager"]=self["webpackChunkgoogle_accounts_manager"]||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))})();var s=t.O(void 0,[504],(()=>t(580)));s=t.O(s)})();